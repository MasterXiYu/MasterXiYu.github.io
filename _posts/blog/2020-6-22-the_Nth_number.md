---
layout: post
title: 第N个数字-数学规律
categories: Leetcode
description: 利用数学规律解决算法问题。
keywords: Leetcode，算法，中等
---

复习算法，看到了这道题，觉得有点意思，发出来娱乐一下

### 问题描述

在无限的整数序列 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, ...中找到第 n 个数字。

注意:
n 是正数且在32位整数范围内 ( n < 2^31)。

链接：https://leetcode-cn.com/problems/nth-digit

### 方法一，暴力
由于是找第几个数字，我们直接考虑先把数字转换成字符串，然后将字符串拼接，得到的一
个超长字符串，然后根据字符串下标返回答案。

空间复杂度O(n),时间复杂度O(n)，因为需要进行一个超长的遍历产生字符串。


### 方法一 python 实现

```python
class Solution:
    def findNthDigit(self, n: int) -> int:
        ans=[str(i) for i in range(1,2000000)]
        temp = ''.join(ans)
        return temp[n-1]
```

不出所料，暴力超时

![Image text](../../images/blog/the_numbers_tijiao.png)

### 方法二，数字规律

我们可以看到，上述的缺点主要是一轮迭代时间过长，仔细看了一下测试用例达到了10000000
，转换成字符转再用数组是不可接受的。

假设输入n=1000，仔细观察发现，它包含个位数，十位数，百位数等.

针对个位数，它只包含一个数字，总计9个
针对十位数，它包含两个数字，99-9=90个数，也就是90*2个数字
针对百位数，它包含三个数字，999-99=900个数，也就是900*3个数字

想到这里，其实已经完成了50%，针对第n个数字，我们先需要找到它位于哪个区间，也就是
知道它是几位数，考虑使用一个mul记录位数，temp记录它的位于的区间。

然后就是找到它的数字，当我们知道了它是几位数之后，其实问题已经很简单了，假设发现n
是一个百位数，我们只要将n减去前面个位数，十位数的数字，得到的数字n就是它是在百位数
上的位置，因为百位数它的位数为3，所以整除3加上100就是我们要求的数所在的数字（有点
拗口），即zz，然后将n模除3就是实际数字应当处于的位置，实际实现如下：

### 方法二 python 实现

```python
class Solution:
    def findNthDigit(self, n: int) -> int:
        temp,mul=0,0 #temp作为上下界，mul是位数
        while n>temp:#注意这里是>,思考9这个测试用例
            temp += 9*(10**mul)*(mul+1)
            mul += 1
        n = n - (temp - 9*(10**(mul-1))*(mul))
        zz = 10**(mul-1) + (n-1)//(mul) #要求的数所在的数字
        return int(str(zz)[(n-1)%(mul)])#实际位置
```



